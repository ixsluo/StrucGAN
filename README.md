# StrucGAN
The Python scripts for generation cluster or molecular using wasserstein generative adversarial network (WGAN), 
which use wasserstrin distence to measure the similarity of original distribution and the distribution generated by generative network.
The most important step in generating new structures by WGAN is coding and decoding strucrure. 
In StrucGAN, the cluster structure with some atoms localized at voxels, where each atoms are extended to fill other nearby voxels with a gaussian function.
In practice, some atoms will localized on the boundary of two voxels, we will move this atom to one voxel by distance.
The Value of voxel i U(i) is
U(i) = sum_j exp(-alpha * R_ij **2 / sigma) where R_ij is the distance of atom j and voxel i, sigam is a parameter determining the wigth of gaussian function.
The length of voxel is decided the 



## Usage

### Supposing the environment variable StrucGANPath=${HOME}/StrucGAN

### Step1: Installing libganstruc
Entering Dir ${StrucGANPath}/GANStrucDeal, running command 
```bash
python setup.py install
```
to install the package in your machine  

### Step2: Structure encoding, and generating training set file struc.h5 by script ${StrucGANPath}/tools/gan_deal_struc.py
```bash
python gan_deal_struc.py --xyz2hd5 --xyzpath=Your Dir contains structure files in xyz format
```

### Step3: Training WGAN
in Dir ${StrucGANPath}
```bash
nohup python main.py --cuda 
```

### Step4: Generating Structure by WGAN
cp the latest GAN model's iparameter file netG_epoch_*.pth in Dir ${StrucGANPath}/samples to Dir ${StrucGANPath}/sampling and entering ${StrucGANPath}/sampling  
```bash
python main.py --netG=netG_epoch_*.pth
```

### Step5: Decoding structures form struc.h5 file
in Dir ${StrucGANPath}/sampling
```bash
python gan_deal_struc.py --hd52xyz
```
